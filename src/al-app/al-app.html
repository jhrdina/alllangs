
<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/polymer-ts/polymer-ts.html">

<link rel="import" href="../../bower_components/app-route/app-location.html">
<link rel="import" href="../../bower_components/app-route/app-route.html">

<!-- Iron elements -->
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../../bower_components/iron-selector/iron-selector.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../my-icons.html">

<!-- App Shell -->
<link rel="import" href="../../bower_components/app-storage/app-indexeddb-mirror/app-indexeddb-mirror.html">

<!-- Paper elements -->
<link rel="import" href="../../bower_components/paper-toast/paper-toast.html">
<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/paper-material/paper-material.html">
<link rel="import" href="../../bower_components/paper-menu/paper-menu.html">
<link rel="import" href="../../bower_components/paper-menu-button/paper-menu-button.html">
<link rel="import" href="../../bower_components/paper-scroll-header-panel/paper-scroll-header-panel.html">
<link rel="import" href="../../bower_components/paper-styles/default-theme.html">

<link rel="import" href="../al-main-view/al-main-view.html">

<dom-module id="al-app">

  <template>

    <style>

      :root {
        --dark-primary-color:       #5D4037;
        --primary-color:            #795548;
        --accent-color:             #FF9800;
      }

      :host {
        @apply(--layout-fullbleed);
        display: block;
        @apply(--layout-vertical);

        color: var(--primary-text-color);
        line-height: initial;
      }

      paper-toolbar#mainToolbar .title {
        margin: 0;
        overflow: visible;
      }

      .dropdown-content {
        background-color: #fff;
        color: #111111;
      }

      #mainMenu {
        width: 11em;
      }

      .menu-separator {
        border-top: 1px solid #ddd;
      }

      #file {
        display: none;
      }

      paper-scroll-header-panel {
        @apply(--layout-flex);
        background: #ECECEC;
        /*overflow-x: auto;*/

        --paper-scroll-header-container: {
          overflow-x: auto;
        };
      }
    </style>

    <!-- <app-location route="{{route}}"></app-location>
    <app-route
        route="{{route}}"
        pattern="/:page"
        data="{{routeData}}"
        tail="{{subroute}}"></app-route> -->
    <iron-ajax
      auto
      url="https://raw.githubusercontent.com/jhrdina/alllangs/master/data.json"
      handle-as="json"
      last-response="{{liveModel}}">
    </iron-ajax>
    <app-indexeddb-mirror
      key="model"
      data="{{liveModel}}"
      on-persisted-data-changed="_onNewData">
    </app-indexeddb-mirror>

    <!-- Main Area -->
    <paper-scroll-header-panel main id="headerPanelMain">

      <!-- Main Toolbar -->
      <paper-toolbar id="mainToolbar">
        <div class="title">All Languages</div>
        <paper-icon-button icon="search"></paper-icon-button>
        <paper-menu-button horizontal-align="right">
          <paper-icon-button icon="more-vert" class="dropdown-trigger"></paper-icon-button>
          <div class="dropdown-content" id="mainMenu">
            <paper-item on-tap="chooseLanguagesTapped">Choose languages</paper-item>
            <paper-item on-tap="addLanguageTapped">Add language</paper-item>
            <div class="menu-separator"></div>
            <paper-item on-tap="importTapped">Import</paper-item>
            <input type="file" id="file" on-change="_onFileSelected"/>
            <paper-item on-tap="exportTapped">Export</paper-item>
            <div class="menu-separator"></div>
            <paper-item on-tap="shortcutsTapped">Key shortcuts</paper-item>
          </div>
        </paper-menu-button>
      </paper-toolbar>

      <!-- Main Content -->
      <al-main-view
        class="content"
        languages="{{model.languages}}"
        sections="{{model.sections}}"></al-main-view>
    </paper-scroll-header-panel>
  </template>

  <script type="text/javascript" src="al-app.js"></script>

</dom-module>
