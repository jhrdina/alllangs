
<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/polymer-ts/polymer-ts.html">
<link rel="import" href="../../bower_components/paper-styles/paper-styles.html">
<link rel="import" href="../../bower_components/iron-autogrow-textarea/iron-autogrow-textarea.html">
<link rel="import" href="../../bower_components/prism-js/prism-js.html">


<dom-module id="al-code-cell">
  <template>
    <link rel="stylesheet" href="../../bower_components/prism/themes/prism.css">
    <style>
      :host {
        @apply(--layout);

        font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
        padding: 2px;

        min-width: 20px;
        min-height: 1.5em;

      }

      iron-autogrow-textarea {
        @apply(--layout-auto);
        border-style: none;
        line-height: 1.5;
        width: 100%;
        padding: 0;

        --iron-autogrow-textarea: {
          padding: 0;
        };
      }

      iron-autogrow-textarea /deep/ .mirror-text {
        white-space: pre-wrap;
        word-break: normal !important;
      }

      prism-js /deep/ pre[class*="language-"] {
        margin: 0;
        padding: 0;
      }

      prism-js /deep/ pre,
      prism-js /deep/ code {
        /* Wrap the same way as textarea */
        word-wrap: break-word !important;
        word-break: normal !important;
        white-space: pre-wrap !important;

        background-color: inherit;
      }

      prism-js {
        @apply(--layout-flex-auto);
        width: 100%;
      }

    </style>

    <template is="dom-if" if="[[!editing]]">
      <prism-js language="[[language]]" input-value="{{text}}"></prism-js>
    </template>
    <template is="dom-if" if="[[editing]]">
      <iron-autogrow-textarea
        on-keydown="keyDown"
        bind-value="{{editedText}}">
      </iron-autogrow-textarea>
    </template>

  </template>
</dom-module>

<script type="text/javascript" src="al-code-cell.js"></script>
